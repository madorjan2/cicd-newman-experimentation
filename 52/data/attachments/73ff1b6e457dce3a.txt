// @allure.label.tag=ads
// @allure.label.tag=list
// @allure.label.tag=positive
// @allure.label.severity=CRITICAL

pm.test("Status code is 200", function () {
    pm.response.to.have.status(200);
});

let jsonData = JSON.parse(responseBody);
pm.test("Response body is array.", function () {    
    pm.expect(jsonData).to.have.length.above(1);
});

pm.test("Both active and inactive ads are shown.", function () {
    let saw_active = false
    let saw_inactive = false
    for (let responseDict of jsonData){
        if (responseDict.active){
            saw_active = true
        }
        else {
            saw_inactive = true
        }
    }
    pm.expect(saw_active && saw_inactive).to.be.true
});

pm.test("Previous test(s) passed", function () {
    pm.expect(pm.environment.get('assertion_chain')).to.be.true;
});