let jsonData = JSON.parse(responseBody);

pm.test("Status code is 400", function () {
    pm.response.to.have.status(400);
});


pm.test("Received correct error message", function () {
    pm.expect(jsonData).to.have.lengthOf(1);    
    pm.expect(jsonData[0]).to.have.property("field");
    pm.expect(jsonData[0]).to.have.property("errorMessage");
    pm.expect(typeof jsonData[0].field).to.eql("string");
    pm.expect(typeof jsonData[0].errorMessage).to.eql("string");
    pm.expect(jsonData[0].field).to.eql("username");
    pm.expect(jsonData[0].errorMessage).to.eql("Username must be between 6 and 15 characters long");
});

pm.test("REMOVE THIS LATER", function () {
    pm.expect(jsonData).to.have.lengthOf(1000);    
    pm.expect(jsonData[0]).to.have.property("field");
    pm.expect(jsonData[0]).to.have.property("errorMessage");
    pm.expect(typeof jsonData[0].field).to.eql("string");
    pm.expect(typeof jsonData[0].errorMessage).to.eql("string");
    pm.expect(jsonData[0].field).to.eql("username");
    pm.expect(jsonData[0].errorMessage).to.eql("Username must be between 6 and 15 characters long");
});